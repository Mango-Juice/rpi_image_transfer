# 시스템 프로그래밍 Assignment #4: 라즈베리 파이 간 GPIO 통신 시스템 설계 및 구현

## 과제 개요

두 개의 라즈베리 파이(Raspberry Pi)를 GPIO 핀으로만 연결하여, 하드웨어부터 응용 프로그램까지 아우르는 완전한 통신 시스템을 직접 설계하고 구현하는 과제입니다.

### 최종 목표

1.  **통신 프로토콜 설계**: GPIO의 High/Low 신호를 이용한 데이터 전송 규칙(프로토콜)을 직접 설계합니다.
2.  **디바이스 드라이버 및 API 구현**: 설계한 프로토콜을 기반으로 커널 수준의 디바이스 드라이버와 사용자 수준의 API를 구현합니다.
3.  **응용 프로그램 구현**: 제작된 드라이버와 API를 활용하여 통신을 검증할 수 있는 간단한 응용 프로그램을 작성합니다.
4.  **동작 검증 및 성능 평가**: 구현된 시스템의 동작을 검증하고, 통신 속도 및 신뢰성 등의 성능을 분석합니다.

---

## 주요 요구사항

### 1. 응용 서비스 선정

- GPIO 통신이 적용될 가상의 응용 서비스(예: IoT 센서, 파일 전송, 채팅 등)를 자유롭게 선정하고, 해당 서비스의 통신 요구사항을 분석합니다.

### 2. 통신 프로토콜 설계

- **물리적 연결**: 사용할 GPIO 핀과 각 핀의 역할(데이터, 클럭, 제어 신호 등)을 설계합니다.
- **동작 방식**: 동기/비동기, 데이터 표현 방식(인코딩), 버퍼링, 오류 검증(예: 체크섬), 재전송 등 통신의 신뢰성과 효율성을 높이기 위한 방법을 자유롭게 설계합니다.
- TCP/IP 등 기존 프로토콜의 개념을 참고하여 설계할 수 있습니다.

### 3. SW 설계 및 구현

- **디바이스 드라이버**:
  - `file_operations` 구조체를 기반으로 `open`, `close`, `read`, `write`, `ioctl` 등의 표준 파일 연산을 제공해야 합니다.
  - GPIO 제어는 `<linux/gpio/consumer.h>`의 `gpiod` 함수 사용을 권장합니다.
- **API (선택 사항)**:
  - 응용 프로그램이 디바이스 드라이버의 시스템 콜을 더 쉽게 사용할 수 있도록 라이브러리 형태의 API를 설계할 수 있습니다.
- **응용 프로그램**:
  - 구현한 시스템의 동작을 테스트하고 시연하는 용도로 작성합니다. (예: 간단한 채팅 프로그램)
  - **매우 중요**: 응용 프로그램은 **반드시 직접 제작한 디바이스 드라이버를 통해서만** GPIO를 제어해야 합니다. 다른 라이브러리를 사용하면 큰 불이익이 발생합니다.

---

## 제출물

- **제출 기한**: 6/28 (토) 11:59 PM
- **제출 파일**:
  1.  `device_driver.zip`: 디바이스 드라이버 소스코드 및 Makefile 포함
  2.  `app.zip`: 응용 프로그램 소스코드 및 API 소스코드 포함
  3.  `Report.pdf`: 아래 내용을 포함한 보고서

---

## 보고서 (Report.pdf) 필수 포함 내용

1.  **주제 선정 및 요구사항 분석**: 선정한 응용 서비스와 그에 따른 통신 요구사항
2.  **통신 기법 설계**: 물리적 연결(핀맵), 통신 방식, 데이터 표현, 오류 제어 등 설계 내용
3.  **SW 설계**:
    - 전체 시스템 구조(응용-API-드라이버) 및 동작 방식
    - `Hello`라는 문자열이 송신 Pi에서 수신 Pi로 전달되는 과정에 대한 상세한 데이터 흐름 분석
4.  **SW 구현**:
    - 핵심 소스코드에 대한 설명 (Device Driver, API, App)
    - 구현한 드라이버와 API의 기능 및 사용 방법
5.  **동작 검증 및 성능 분석**:
    - 문자열 전송 성공을 입증하는 스크린샷
    - 통신 속도, 신뢰성, 자원 효율성 등에 대한 이론적/실측적 분석
    - 자신이 설계한 프로토콜을 기존 프로토콜(I2C, SPI, UART 등)과 비교 분석

---

## 주요 제약 및 참고사항

- **개인 과제**: 모든 제출물은 개인이 작성해야 합니다. (팀원 간 토론 및 협업은 권장)
- **핀 사용 제한**: **최대 5개의 GPIO 핀**만 사용해야 합니다. (GND 핀 제외)
- **AI 활용**: 코드 작성에 AI 활용은 가능하지만, AI가 생성한 코드의 동작 원리와 구조를 **완벽히 이해하고 설명할 수 있어야 합니다.** 설계서와 구현 내용이 다를 경우 큰 감점이 있습니다.
- **타이밍 제어**: 마이크로초(μs) 단위의 정밀한 타이밍 제어는 어려움을 감안하며, 밀리초(ms) 단위로 구현해도 괜찮습니다.
- **!! 하드웨어 주의사항 !!**:
  - **절대 GPIO `out` 핀과 `out` 핀을 서로 연결하지 마십시오.** 두 핀에서 동시에 High 신호가 출력되면 회로가 손상될 수 있습니다.
  - 데이터를 수신할 핀은 **반드시 `direction`을 `in`으로 설정한 후**에 물리적으로 전선을 연결해야 합니다.
