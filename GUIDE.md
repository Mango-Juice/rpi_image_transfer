# 시스템 프로그래밍 Assignment #4: 라즈베리 파이 간 GPIO 통신 시스템 설계 및 구현

## 과제 개요

두 개의 라즈베리 파이(Raspberry Pi)를 GPIO 핀으로만 연결하여, 하드웨어부터 응용 프로그램까지 아우르는 완전한 통신 시스템을 직접 설계하고 구현하는 과제입니다.

### 최종 목표

1.  **통신 프로토콜 설계**: GPIO의 High/Low 신호를 이용한 데이터 전송 규칙(프로토콜)을 직접 설계합니다.
2.  **디바이스 드라이버 및 API 구현**: 설계한 프로토콜을 기반으로 커널 수준의 디바이스 드라이버와 사용자 수준의 API를 구현합니다.
3.  **응용 프로그램 구현**: 제작된 드라이버와 API를 활용하여 통신을 검증할 수 있는 간단한 응용 프로그램을 작성합니다.
4.  **동작 검증 및 성능 평가**: 구현된 시스템의 동작을 검증하고, 통신 속도 및 신뢰성 등의 성능을 분석합니다.

---

## 구현된 시스템: E-paper 이미지 전송 시스템

### 응용 서비스

- **목적**: 라즈베리파이 간 이미지 데이터의 안전하고 신뢰성 있는 전송
- **프로토콜**: 5-pin 시리얼 통신 (Clock, Data, Start/Stop, ACK, NACK)
- **특징**: CRC32 검증, 자동 재전송, 타임아웃 처리

### 통신 프로토콜: 5-pin 시리얼 프로토콜

- **물리적 연결**: Clock, Data, Start/Stop, ACK, NACK 신호
- **동작 방식**: 동기식 시리얼 전송, 블록 단위 전송, CRC32 체크섬
- **오류 복구**: 자동 재전송 (최대 3회), 2초 타임아웃

### SW 구현 완료

- **디바이스 드라이버**: tx_driver.c, rx_driver.c (5-pin 시리얼 프로토콜)
- **API 라이브러리**: send_epaper_data.c/h, receive_epaper_data.c/h
- **응용 프로그램**: epaper_send, epaper_receive

---

## 구현된 파일 구조

```
시프/
├── drivers/           # 커널 드라이버 (5-pin 시리얼)
│   ├── tx_driver.c    # 송신 드라이버
│   ├── rx_driver.c    # 수신 드라이버
│   ├── epaper-gpio.dts # 디바이스 트리
│   └── Makefile
├── apis/              # 사용자 라이브러리
│   ├── send_epaper_data.c/h      # 송신 API
│   ├── receive_epaper_data.c/h   # 수신 API
│   └── Makefile
├── programs/          # 응용 프로그램
│   ├── epaper_send.c     # 송신 프로그램
│   ├── epaper_receive.c  # 수신 프로그램
│   └── Makefile
└── 문서화/
    ├── README.md          # 전체 가이드
    ├── DRIVER_GUIDE.md    # 드라이버 가이드
    └── API_GUIDE.md       # API 가이드
```

## 보고서 (Report.pdf) 필수 포함 내용

1.  **주제 선정 및 요구사항 분석**: 선정한 응용 서비스와 그에 따른 통신 요구사항
2.  **통신 기법 설계**: 물리적 연결(핀맵), 통신 방식, 데이터 표현, 오류 제어 등 설계 내용
3.  **SW 설계**:
    - 전체 시스템 구조(응용-API-드라이버) 및 동작 방식
    - `Hello`라는 문자열이 송신 Pi에서 수신 Pi로 전달되는 과정에 대한 상세한 데이터 흐름 분석
4.  **SW 구현**:
    - 핵심 소스코드에 대한 설명 (Device Driver, API, App)
    - 구현한 드라이버와 API의 기능 및 사용 방법
5.  **동작 검증 및 성능 분석**:
    - 문자열 전송 성공을 입증하는 스크린샷
    - 통신 속도, 신뢰성, 자원 효율성 등에 대한 이론적/실측적 분석
    - 자신이 설계한 프로토콜을 기존 프로토콜(I2C, SPI, UART 등)과 비교 분석

---

## 주요 제약 및 참고사항

- **개인 과제**: 모든 제출물은 개인이 작성해야 합니다. (팀원 간 토론 및 협업은 권장)
- **핀 사용 제한**: **최대 5개의 GPIO 핀**만 사용해야 합니다. (GND 핀 제외)
- **AI 활용**: 코드 작성에 AI 활용은 가능하지만, AI가 생성한 코드의 동작 원리와 구조를 **완벽히 이해하고 설명할 수 있어야 합니다.** 설계서와 구현 내용이 다를 경우 큰 감점이 있습니다.
- **타이밍 제어**: 마이크로초(μs) 단위의 정밀한 타이밍 제어는 어려움을 감안하며, 밀리초(ms) 단위로 구현해도 괜찮습니다.
- **!! 하드웨어 주의사항 !!**:
  - **절대 GPIO `out` 핀과 `out` 핀을 서로 연결하지 마십시오.** 두 핀에서 동시에 High 신호가 출력되면 회로가 손상될 수 있습니다.
  - 데이터를 수신할 핀은 **반드시 `direction`을 `in`으로 설정한 후**에 물리적으로 전선을 연결해야 합니다.
